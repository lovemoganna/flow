==========
Youtube-dl
==========




1 学会使用youtube-dl
--------------------

目标链接: `https://www.youtube.com/watch?v=DDs5bXh4erM <https://www.youtube.com/watch?v=DDs5bXh4erM>`_

1.1 参数含义
~~~~~~~~~~~~

1.1.1 选项
^^^^^^^^^^

.. table::

    +---------------------------+------------------------------------------------------------+
    | 参数                      | 含义                                                       |
    +===========================+============================================================+
    | -i, --ignore-errors       | 继续下载错误,例如跳过播放列表中不可用的视频                |
    +---------------------------+------------------------------------------------------------+
    | --abort-on-error          | 如果(在播放列表或者命令行中)发生错误中止下载更多视频       |
    +---------------------------+------------------------------------------------------------+
    | --dump-user-agent         | 显示当前浏览器的校验                                       |
    +---------------------------+------------------------------------------------------------+
    | --list-extractors         | 列出所有支持的网站                                         |
    +---------------------------+------------------------------------------------------------+
    | --extractor-descriptions  | 输出所有支持网站的描述                                     |
    +---------------------------+------------------------------------------------------------+
    | --force-generic-extractor | 强制提取使用通用网站提取器                                 |
    +---------------------------+------------------------------------------------------------+
    | --default-search PREFIX   | 对不合格的URL使用这个前缀. [1]_                            |
    +---------------------------+------------------------------------------------------------+
    | --ignore-config           | 不读取配置文件. [2]_                                       |
    +---------------------------+------------------------------------------------------------+
    | --config-location PATH    | 配置文件的位置；可以是配置文件的路径,也可以是其包含的目录. |
    +---------------------------+------------------------------------------------------------+
    | --flat-playlist           | 不要提取视频 播放列表,只列出它们.                          |
    +---------------------------+------------------------------------------------------------+
    | --mark-watched            | --mark-watched 标记观看过的视频(仅限 YouTube)              |
    +---------------------------+------------------------------------------------------------+
    | --no-mark-watched         | 不要标记观看过的视频 (仅限于YouTube)                       |
    +---------------------------+------------------------------------------------------------+
    | --no-color                | 不要在输出中发出颜色代码                                   |
    +---------------------------+------------------------------------------------------------+

1.1.2 地理限制
^^^^^^^^^^^^^^

.. table::

    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | 参数                               | 含义                                                                                                                |
    +====================================+=====================================================================================================================+
    | --geo-verification-proxy <url>     | 使用这个代理来验证一些有地理限制的网站的IP地址.实际下载时使用由--proxy指定的默认代理(如果不存在该选项,则使用无代理) |
    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | --geo-bypass                       | 通过伪造 =X-Forwarded-For HTTP头来绕过地理限制                                                                      |
    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | --no-geo-bypass                    | 不通过伪造X-Forwarded-For HTTP头来绕过地理限制                                                                      |
    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | --geo-bypass-country CODE          | 用明确提供的双字母ISO 3166-2国家代码强制绕过地理限制                                                                |
    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+
    | --geo-bypass-ip-block ``IP_BLOCK`` | 使用明确提供的CIDR符号的IP块来绕过地理限制.                                                                         |
    +------------------------------------+---------------------------------------------------------------------------------------------------------------------+

1.1.3 视频选择
^^^^^^^^^^^^^^

.. table::

    +--------------------------------+--------------------------------------------------------------+
    | 参数                           | 含义                                                         |
    +================================+==============================================================+
    | --playlist-start NUMBER        | 播放列表视频开始(默认为 1)                                   |
    +--------------------------------+--------------------------------------------------------------+
    | --playlist-end NUMBER          | 播放列表视频结束位置(默认为 1)                               |
    +--------------------------------+--------------------------------------------------------------+
    | --playlist-items ``ITEM_SPEC`` | 要下载的播放列表视频项目. [3]_                               |
    +--------------------------------+--------------------------------------------------------------+
    | --match-title REGEX            | 只下载匹配的标题(regex或无大小写的子串)                      |
    +--------------------------------+--------------------------------------------------------------+
    | --reject-title REGEX           | 跳过下载匹配的标题(regex或无大小写的子字符串).               |
    +--------------------------------+--------------------------------------------------------------+
    | --max-downloads NUMBER         | 在下载完NUMBER的文件后放弃.                                  |
    +--------------------------------+--------------------------------------------------------------+
    | --min-filesize SIZE            | 不下载任何小于SIZE的视频(如50k或44.6m)                       |
    +--------------------------------+--------------------------------------------------------------+
    | --max-filesize SIZE            | 不下载任何大于SIZE的视频(如50k或44.6m).                      |
    +--------------------------------+--------------------------------------------------------------+
    | --date DATE                    | 只下载在此日期上传的视频                                     |
    +--------------------------------+--------------------------------------------------------------+
    | --datebefore DATE              | 只下载在此日期或之前上传的视频(即包括在内).                  |
    +--------------------------------+--------------------------------------------------------------+
    | --max-views COUNT              | 不下载浏览量超过 COUNT 的视频.                               |
    +--------------------------------+--------------------------------------------------------------+
    | --no-playlist                  | 只下载视频,如果URL指的是一个视频和一个播放列表.              |
    +--------------------------------+--------------------------------------------------------------+
    | --yes-playlist                 | 下载播放列表,如果URL指的是一个视频和一个播放列表.            |
    +--------------------------------+--------------------------------------------------------------+
    | --age-limit YEARS              | 只下载适合指定年龄的视频                                     |
    +--------------------------------+--------------------------------------------------------------+
    | --download-archive FILE        | 只下载档案文件中没有列出的视频.在其中记录所有下载的视频的ID. |
    +--------------------------------+--------------------------------------------------------------+
    | --include-ads                  | 也下载广告(试验性的).                                        |
    +--------------------------------+--------------------------------------------------------------+
    | --match-filter FILTER          | 通用的视频过滤器.指定任何键 [4]_                             |
    +--------------------------------+--------------------------------------------------------------+

1.1.4 下载选项
^^^^^^^^^^^^^^

.. table::

    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |              参数               | 含义                                                                                                              |
    +=================================+===================================================================================================================+
    |      -r, --limit-rate RATE      | 最大的下载速率,单位是字节/秒(例如,50K或4.2M).                                                                     |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |      -R, --retries RETRIES      | 重试次数(默认为10),或 "无限".                                                                                     |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |   --fragment-retries RETRIES    | 一个片段的重试次数(默认为10),或 "无限"(DASH、hlsnative和ISM).                                                     |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |  --skip-unavailable-fragments   | 跳过不可用的片段(DASH, hlsnative and ISM)                                                                         |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    | --abort-on unavailable-fragment | 当某些片段不可用时,中止下载.                                                                                      |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |        --keep-fragments         | 在下载完成后,将下载的片段保留在磁盘上；默认情况下,片段会被清除掉                                                  |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |       --buffer-size SIZE        | 下载缓冲区的大小(例如1024或16K)(默认为1024).                                                                      |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |       --no-resize-buffer        | 不自动调整缓冲区的大小.默认情况下,缓冲区的大小会从初始值SIZE自动调整.                                             |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |        --http-chunk-size        | 基于分块的HTTP下载的分块大小(例如10485760或10M)(默认为禁用).对于绕过网络服务器施加的带宽限制可能很有用(试验性的). |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |       --playlist-reverse        | 按相反顺序下载播放列表中的视频                                                                                    |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |        --playlist-random        | 以随机顺序下载播放列表的视频                                                                                      |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |      --xattr-set-filesize       | 用预期的文件大小设置文件x属性ytdl.filesize                                                                        |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |       --hls-prefer-native       | 使用本地HLS下载器而不是ffmpeg                                                                                     |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |       --hls-prefer-ffmpeg       | 使用ffmpeg而不是本地HLS下载器                                                                                     |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |        --hls-use-mpegts         | 对HLS视频使用mpegts容器,允许在下载时播放视频(有些播放器可能无法播放).                                             |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    |  --external-downloader COMMAND  | 使用指定的外部下载器.目前支持aria2c、avconv、axel、c url、ffmpeg、httpie、wget.                                   |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+
    | --external-downloader-args ARGS | 把这些参数给外部下载器                                                                                            |
    +---------------------------------+-------------------------------------------------------------------------------------------------------------------+

1.1.5 文件系统选项
^^^^^^^^^^^^^^^^^^

.. table::

    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | 参数                                | 含义                                                                                                                     |
    +=====================================+==========================================================================================================================+
    | -a, --batch-file FILE               | 包含要下载的URL的文件('-'代表stdin),每行一个URL.以'#'、';'或']'开头的行被认为是注释,并被忽略.--id 在文件名中只使用视频ID |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | -o, --output TEMPLATE               | 输出文件名模板,所有信息见 "OUTPUT TEMPLATE".                                                                             |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --output-na-placeholder PLACEHOLDER | 输出文件名模板中不可用的元字段的占位值(默认为 "NA").                                                                     |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --autonumber-start NUMBER           | 指定%(autonumber)的起始值(默认为1)                                                                                       |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --restrict-filenames                | 限制文件名只能使用ASCII字符,并避免在文件名中使用"&"和空格.                                                               |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | -w, --no-overwrites                 | 不覆盖文件                                                                                                               |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | -c, --continue                      | 强制恢复部分下载的文件.默认情况下,如果可能的话,youtube-dl会恢复下载.                                                     |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --no-continue                       | 不恢复部分下载的文件(从头开始).                                                                                          |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --no-part                           | 不使用.part文件--直接写进输出文件.                                                                                       |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --no-mtime                          | 不使用Last-modified标头来设置文件的修改时间.                                                                             |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --write-description                 | 将视频描述写入.description文件中                                                                                         |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --write-annotations                 | 将视频注解写入.annotations.xml文件中                                                                                     |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --load-info-json FILE               | 包含视频信息的JSON文件(用"-write-info-json "选项创建).                                                                   |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --cookies FILE                      | 从中读取cookie的文件,并将cookie jar转入其中.                                                                             |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --cache-dir DIR                     | 在文件系统中的位置,youtube-dl可以永久地存储一些下载的信息. [5]_                                                          |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --no-cache-dir                      | 禁用文件系统缓存                                                                                                         |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
    | --rm-cache-dir                      | 删除所有文件系统缓存文件                                                                                                 |
    +-------------------------------------+--------------------------------------------------------------------------------------------------------------------------+

1.1.6 缩略图选项
^^^^^^^^^^^^^^^^

.. table::

    +------------------------+---------------------------------+
    | 参数                   | 含义                            |
    +========================+=================================+
    | --write-thumbnail      | 将缩略图象写入磁盘              |
    +------------------------+---------------------------------+
    | --write-all-thumbnails | 将所有的缩略图格式写到磁盘上    |
    +------------------------+---------------------------------+
    | --list-thumbnails      | 模拟并列举所有可用的 缩略图格式 |
    +------------------------+---------------------------------+

1.1.7 详细/仿真选项：
^^^^^^^^^^^^^^^^^^^^^

.. table::

    +------------------------+---------------------------------------------------------------------------------------------------+
    | 参数                   | 含义                                                                                              |
    +========================+===================================================================================================+
    | -q, --quiet            | 激活安静模式                                                                                      |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --no-warnings          | 忽略警告                                                                                          |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | -s, --simulate         | 不下载视频,也不向磁盘写入任何内容                                                                 |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --skip-download        | 不下载视频                                                                                        |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | -g, --get-url          | 模拟,安静但打印URL                                                                                |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | -e, --get-title        | 模拟,安静但打印标题                                                                               |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-id               | 模拟,安静但打印id                                                                                 |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-thumbnail        | 模拟,安静但打印缩略图URL                                                                          |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-description      | 模拟,安静但打印视频描述                                                                           |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-duration         | 模拟,安静但打印视频长度                                                                           |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-filename         | 模拟,安静但打印输出文件名                                                                         |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --get-format           | 模拟,安静但打印输出格式                                                                           |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --j, --dump-json       | 模拟,安静但打印JSON信息.参见 "OUTPUT TEMPLATE "中对可用键的描述.                                  |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | -J, --dump-single-json | 模拟,安静但打印每个命令行参数的JSON信息.如果URL指的是一个播放列表,则在单行中转储整个播放列表信息. |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --print-json           | 保持安静,将视频信息打印成JSON格式(视频仍在下载中).                                                |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --newline              | 以新行形式输出进度条                                                                              |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --no-progress          | 不打印进度条                                                                                      |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --console-title        | 在控制台标题栏显示进度                                                                            |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --v, --verbose         | 打印各种调试信息                                                                                  |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --dump-pages           | 打印用base64编码的下载页面,以调试问题(非常粗略).                                                  |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --write-pages          | 将下载的中间页写入当前目录下的文件以调试问题                                                      |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --print-traffic        | 显示发送和读取的HTTP流量                                                                          |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --C, --call-home       | 联系youtube-dl服务器进行调试                                                                      |
    +------------------------+---------------------------------------------------------------------------------------------------+
    | --no-call-home         | 不要联系优酷网服务器进行调试                                                                      |
    +------------------------+---------------------------------------------------------------------------------------------------+

1.1.8 策略
^^^^^^^^^^

.. table::

    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | 参数                         | 含义                                                                                                                    |
    +==============================+=========================================================================================================================+
    | --encoding ENCODING          | 强制使用指定的编码(实验性).                                                                                             |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --no-check-certificate       | 抑制HTTPS证书的验证                                                                                                     |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --prefer-insecure            | 使用未加密的连接来检索视频的信息.(目前只支持YouTube)                                                                    |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --user-agent UA              | 指定一个自定义的用户代理                                                                                                |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --referer URL                | 指定一个自定义的referer,在视频访问被限制在一个域内时使用.                                                               |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --add-header FIELD:VALUE     | 指定一个自定义HTTP头和它的值,用冒号':'分开.你可以多次使用这个选项                                                       |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --bidi-workaround            | 在缺乏双向文本支持的终端上工作.需要bidiv或fribidi可执行文件在PATH中.                                                    |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --sleep-interval SECONDS     | 单独使用时,每次下载前睡眠的秒数；与 --max-sleep-interval 一起使用时,每次下载前随机睡眠的范围的下限(可能的最小睡眠秒数). |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+
    | --max-sleep-interval SECONDS | 每次下载前的随机睡眠范围的上限(可能的最大睡眠秒数).必须与--min- sleep-interval一起使用.                                 |
    +------------------------------+-------------------------------------------------------------------------------------------------------------------------+

1.1.9 视频格式选项
^^^^^^^^^^^^^^^^^^

.. table::

    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | 参数                         | 含义                                                                                                                 |
    +==============================+======================================================================================================================+
    | -f, --format FORMAT          | 视频格式代码,所有信息见 "格式选择".                                                                                  |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | --all-formats                | 下载所有可用的视频格式                                                                                               |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | --prefer-free-formats        | 优先选择免费的视频格式,除非要求特定的格式                                                                            |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | --F, --list-formats          | 列出所请求视频的所有可用格式                                                                                         |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | --youtube-skip-dash-manifest | 不下载YouTube视频的DASH清单和相关数据                                                                                |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+
    | --merge-output-format FORMAT | 如果需要合并(例如bestvideo+bestaudio),则输出到给定的容器格式.mkv, mp4, ogg, webm, flv中的一种.如果不需要合并,则忽略. |
    +------------------------------+----------------------------------------------------------------------------------------------------------------------+

1.1.10 标题选项
^^^^^^^^^^^^^^^

.. table::

    +---------------------+-------------------------------------------------------------------------+
    | 参数                | 含义                                                                    |
    +=====================+=========================================================================+
    | --write-sub         | 编写字幕文件                                                            |
    +---------------------+-------------------------------------------------------------------------+
    | --write-auto-sub    | 写入自动生成的字幕文件(仅YouTube)                                       |
    +---------------------+-------------------------------------------------------------------------+
    | --all-subs          | 下载视频的所有可用字幕                                                  |
    +---------------------+-------------------------------------------------------------------------+
    | --list-subs         | 列出视频的所有可用字幕                                                  |
    +---------------------+-------------------------------------------------------------------------+
    | --sub-format FORMAT | 字幕格式,接受偏好的格式,例如."srt "或 "ass/srt/best"                    |
    +---------------------+-------------------------------------------------------------------------+
    | --sub-lang LANGS    | 要下载的字幕的语言(可选),用逗号隔开,使用 --list-subs 获取可用的语言标签 |
    +---------------------+-------------------------------------------------------------------------+

1.1.11 Adobe通行证选项
^^^^^^^^^^^^^^^^^^^^^^

.. table::

    +------------------------+-----------------------------------------------------------------------------------+
    | 参数                   | 含义                                                                              |
    +========================+===================================================================================+
    | --ap-mso MSO Adobe     | 通过多系统运营商(电视供应商)的标识符,使用--ap-list-mso获取可用的多系统运营商列表. |
    +------------------------+-----------------------------------------------------------------------------------+
    | --ap-username USERNAME | 多系统运营商账户登录                                                              |
    +------------------------+-----------------------------------------------------------------------------------+
    | --ap-password PASSWORD | 多系统运营商账户密码.如果没有这个选项,youtube-dl将以交互方式询问.                 |
    +------------------------+-----------------------------------------------------------------------------------+
    | --ap-list-mso          | 列出所有支持的多系统操作员                                                        |
    +------------------------+-----------------------------------------------------------------------------------+

1.1.12 授权选项
^^^^^^^^^^^^^^^

.. table::

    +---------------------------+-------------------------------------------------------+
    | 参数                      | 含义                                                  |
    +===========================+=======================================================+
    | -u, --username USERNAME   | 用这个账户ID登录                                      |
    +---------------------------+-------------------------------------------------------+
    | -p, --密码 PASSWORD       | 帐户密码.如果没有这个选项,youtube-dl将以交互方式询问. |
    +---------------------------+-------------------------------------------------------+
    | -2, --twofactor TWOFACTOR | 双因素认证码                                          |
    +---------------------------+-------------------------------------------------------+
    | -n, --netrc               | 使用.netrc认证数据                                    |
    +---------------------------+-------------------------------------------------------+
    | --video-password PASSWORD | 视频密码(vimeo, youku                                 |
    +---------------------------+-------------------------------------------------------+

1.1.13 后处理选项
^^^^^^^^^^^^^^^^^

.. table::

    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 参数                         | 含义                                                                                                                                                                                                                                                                                                                                                                     |
    +==============================+==========================================================================================================================================================================================================================================================================================================================================================================+
    | -x, --extract-audio          | 将视频文件转换成纯音频文件(需要ffmpeg/avconv和ffprobe/avprobe                                                                                                                                                                                                                                                                                                            |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --audio-format FORMAT        | 指定音频格式."best", "aac", "flac", "mp3", "m4a", "opus", "vorbis", 或 "wav"; 默认为 "best"; 没有-x则无效果                                                                                                                                                                                                                                                              |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --audio-quality QUALITY      | 指定ffmpeg/avconv的音频质量,对于VBR或特定的比特率(如128K),插入一个介于0(更好)和9(更差)之间的值(默认为5                                                                                                                                                                                                                                                                   |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --recode-video FORMAT        | 必要时将视频编码为另一种格式(目前支持：MP4 FLV OG WEBM MKVAVI)                                                                                                                                                                                                                                                                                                           |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --postprocessor-args ARGS    | 给后处理程序提供这些参数                                                                                                                                                                                                                                                                                                                                                 |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | -k, --keep-video             | 后期处理后保持磁盘上的视频文件；默认情况下,视频会被清除掉                                                                                                                                                                                                                                                                                                                |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --no-post-overwrites         | 不覆盖后期处理的文件；默认情况下,后期处理的文件被覆盖了                                                                                                                                                                                                                                                                                                                  |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --embed-subs                 | 在视频中嵌入字幕(只针对mp4、webm和mkv视频                                                                                                                                                                                                                                                                                                                                |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --embed-thumbnail            | 在音频中嵌入缩略图作为封面画                                                                                                                                                                                                                                                                                                                                             |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --add-metadata               | 给视频文件写入元数据                                                                                                                                                                                                                                                                                                                                                     |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --metadata-from-title FORMAT | 从视频标题中解析额外的元数据,如歌曲名称/艺术家.格式的语法与--output相同.也可以使用带有命名捕获组的正则表达式.被解析的参数会取代现有的值.例如： --metadata-from-title "%(artist)s - %(title)s" 匹配 "Coldplay - Paradise "这样的标题.例子(regex): --metadata-from-title "(?P<artist>.+?) - (?P<title>.+)" --xattrs 将元数据写入视频文件的xattrs(使用dublin core和xdg标准) |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --fixup POLICY               | 自动纠正文件的已知错误.从不(什么都不做)、警告(只发出警告)、detect\ :sub:`or`\ \ :sub:`warn`\(默认；如果我们能修复文件,则警告)中选择一个.                                                                                                                                                                                                                                 |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --prefer-avconv              | 在运行后处理程序时优先选择avconv而不是ffmpeg.                                                                                                                                                                                                                                                                                                                            |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --prefer-ffmpeg              | 在运行后处理程序时,优先选择ffmpeg而不是avconv(默认).                                                                                                                                                                                                                                                                                                                     |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --ffmpeg-location PATH       | ffmpeg/avconv 二进制文件的位置；二进制文件的路径或其包含的目录.                                                                                                                                                                                                                                                                                                          |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --exec CMD                   | 在下载和后处理后对文件执行命令,类似于find的-exec语法.例子： --exec 'adb push {} *sdcard/Music* && rm {}'                                                                                                                                                                                                                                                                 |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | --convert-subs FORMAT        | 将字幕转换成其他格式(目前支持：srt ass vtt lrc)                                                                                                                                                                                                                                                                                                                          |
    +------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


--audio-format mp3
-k
--embed-subs
--ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\
--convert-subs srt

1.2 使用场景
~~~~~~~~~~~~

-mC3tZESTSs

1.2.1 下载所有的缩略图
^^^^^^^^^^^^^^^^^^^^^^

--write-all-thumbnails

1.2.2 重复下载10次
^^^^^^^^^^^^^^^^^^

-R 10

--hls-prefer-ffmpeg

youtube-dl.exe -f best -R 10 --hls-prefer-ffmpeg --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\ffmpeg.exe `https://www.youtube.com/watch?v=8OwEzOCcTNk <https://www.youtube.com/watch?v=8OwEzOCcTNk>`_

1.2.3 重命名 & 指定位置下载
^^^^^^^^^^^^^^^^^^^^^^^^^^^

youtube-dl.exe -o "Julia Wu-依然.mp4" `https://www.youtube.com/watch?v=8OwEzOCcTNk <https://www.youtube.com/watch?v=8OwEzOCcTNk>`_
youtube-dl.exe -o "F:\\\Julia Wu-依然.mp4" `https://www.youtube.com/watch?v=8OwEzOCcTNk <https://www.youtube.com/watch?v=8OwEzOCcTNk>`_

1.2.3.1 携带元数据信息
::::::::::::::::::::::

例如标题、上传者名称(频道名称)和上传日期等

youtube-dl.exe -o "F:\\\\%(title)s by %(uploader)s on %(upload\ :sub:`date`\)s in %(playlist)s.%(ext)s-Julia Wu-依然.mp4" `https://www.youtube.com/watch?v=8OwEzOCcTNk <https://www.youtube.com/watch?v=8OwEzOCcTNk>`_

1.2.4 下载多个视频
^^^^^^^^^^^^^^^^^^

youtube-dl <url1> <url2>
youtube-dl -a url.txt

1.2.5 只下载音频
^^^^^^^^^^^^^^^^

youtube-dl -x --audio-format mp3 url

youtube-dl.exe -x --audio-format m4a --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\ `https://www.youtube.com/watch?v=JVa4Hd7qYXY <https://www.youtube.com/watch?v=JVa4Hd7qYXY>`_

1.2.6 下载带有描述、元数据、注释、字幕和缩略图的视频
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

youtube-dl --write-description --write-info-json --write-annotations --write-sub --write-thumbnail <url>

youtube-dl --write-description --write-info-json --write-annotations --write-sub --write-thumbnail `https://www.youtube.com/watch?v=zyRNIdpbIxg <https://www.youtube.com/watch?v=zyRNIdpbIxg>`_

1.2.7 列出所有可用格式的视频或播放列表
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

youtube-dl --list-formats

youtube-dl -F

1.2.7.1 下载特定质量和/或格式的视频
:::::::::::::::::::::::::::::::::::

best
worst
bestvideo
worstvideo
bestaudio
worstaudio

组合下载 (需要ffmpeg合并)
youtube-dl -f bestvideo+bestaudio
youtube-dl -f bestvideo+bestaudio --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\ `https://www.youtube.com/watch?v=5Kv9fDxYIiY <https://www.youtube.com/watch?v=5Kv9fDxYIiY>`_

分开下载
youtube-dl -f 'bestvideo,bestaudio'

区间
youtube-dl -f 'bestvideo[height<=480]+bestaudio/best[height<=480]'
youtube-dl -f "best[height<=480]"

1.2.8 按照文件扩展名下载
^^^^^^^^^^^^^^^^^^^^^^^^

youtube-dl -f mp4

youtube-dl -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best" `https://www.youtube.com/watch?v=7E-cwdnsiow <https://www.youtube.com/watch?v=7E-cwdnsiow>`_

youtube-dl -f mp4 -o "%(title)sf%(format\ :sub:`id`\)s.%(ext)s" `https://www.youtube.com/watch?v=7E-cwdnsiow <https://www.youtube.com/watch?v=7E-cwdnsiow>`_

1.2.9 设置视频大小限制
^^^^^^^^^^^^^^^^^^^^^^

- 只下载大于100M的视频

  youtube-dl --min-filesize 100M <playlist\ :sub:`url`\>
  youtube-dl --max-filesize 100M <playlist\ :sub:`url`\>
  youtube-dl -f "best[filesize<100M]" `https://www.youtube.com/watch?v=7E-cwdnsiow <https://www.youtube.com/watch?v=7E-cwdnsiow>`_

1.2.10 按日期下载视频
^^^^^^^^^^^^^^^^^^^^^

youtube-dl --date 20181001 <URL>

- 特定日期上传或者之前上传的视频

  youtube-dl --datebefore 20180101 <URL>

  youtube-dl --dateafter 20180101 <URL>

  youtube-dl --dateafter now-6months <URL>

  youtube-dl --dateafter 20180101 --datebefore 20190101

1.2.11 从播放列表下载特定视频
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

仅支持youtube

youtube-dl --dateafter 20190709 --datebefore 20200810 --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\ `https://v.youku.com/v_show/id_XNDE4MDIxNjg2NA==.html?f=52180465 <https://v.youku.com/v_show/id_XNDE4MDIxNjg2NA==.html?f=52180465>`_

1.2.12 恢复下载
^^^^^^^^^^^^^^^

-c

1.3 使用场景2
~~~~~~~~~~~~~

1.3.1 列出所有字幕
^^^^^^^^^^^^^^^^^^

youtube-dl --list-subs `https://www.youtube.com/watch?v=_Mz4LpFyBqo <https://www.youtube.com/watch?v=_Mz4LpFyBqo>`_

1.3.2 下载带字幕的视频
^^^^^^^^^^^^^^^^^^^^^^

youtube-dl --write-auto-sub --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\ `https://www.youtube.com/watch?v=DDs5bXh4erM <https://www.youtube.com/watch?v=DDs5bXh4erM>`_

1.3.3 下载英文字幕并合并
^^^^^^^^^^^^^^^^^^^^^^^^

.. code:: shell

    youtube-dl --write-srt --sub-lang en --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\ https://www.youtube.com/watch?v=DDs5bXh4erM

1.3.4 检查所有字幕
^^^^^^^^^^^^^^^^^^

youtube-dl --list-subs `https://www.youtube.com/watch?v=_Mz4LpFyBqo <https://www.youtube.com/watch?v=_Mz4LpFyBqo>`_

1.3.4.1 只下载字幕
::::::::::::::::::

youtube-dl --write-srt --sub-lang en  --skip-download  `https://youtube.com/watch?v=mfQel3jxK-g <https://youtube.com/watch?v=mfQel3jxK-g>`_

youtube-dl --write-srt --sub-lang zh-Hans --skip-download --ffmpeg-location F:\files\soul\soft\ffmpeg\bin\\ `https://www.youtube.com/watch?v=DDs5bXh4erM <https://www.youtube.com/watch?v=DDs5bXh4erM>`_

1.4 使用场景3
~~~~~~~~~~~~~

1.4.1 合成单语言字幕
^^^^^^^^^^^^^^^^^^^^

.. code:: bat

    F:\files\soul\soft\ffmpeg\bin\ffmpeg -i target.mp4 -strict -2 -vf subtitles=zh_tw.srt:force_style='Fontsize=20\,Fontname=Microsoft-YaHei-UI\,MarginV=30\,Bold=-1\,BorderStyle=1' -qscale:v 3 target-cn.mp4.mp4

1.4.2 合成双语言字幕
^^^^^^^^^^^^^^^^^^^^

.. code:: bat

    F:\files\soul\soft\ffmpeg\bin\ffmpeg -i target-cn.mp4.mp4 -strict -2 -vf subtitles=en.srt:force_style='Fontsize=15\,Fontname=Microsoft-YaHei-UI\,Bold=-1\,BorderStyle=1' -qscale:v 3 hack_with_double_subtitles.mp4

`https://blog.csdn.net/weixin_45478646/article/details/108566925 <https://blog.csdn.net/weixin_45478646/article/details/108566925>`_

1.5 示例
~~~~~~~~

1.5.1 下载目标文件
^^^^^^^^^^^^^^^^^^

.. code:: shell

    youtube-dl.exe --proxy socks5://127.0.0.1:1081 --write-all-thumbnails -R 10 --verbose -x --audio-format m4a --ffmpeg-location D:\ffmpeg\bin --write-description --write-info-json --write-annotations --write-sub --write-thumbnail -f best https://www.youtube.com/watch?v=-mC3tZESTSs

1.5.2 转换音频
^^^^^^^^^^^^^^

1.5.3 制作字幕
^^^^^^^^^^^^^^

1.5.4 合成字幕
^^^^^^^^^^^^^^

1.5.5 转换为英文字幕
^^^^^^^^^^^^^^^^^^^^

.. code:: shell

    ls -ll


.. [1] 例如,"gvsearch2:"从google视频下载两个视频,用于youtube-dl "大苹
    果". 使用值 "auto" 让 YouTube-dl 猜测( ``"auto_warning"`` 在猜测时发出警
    告)."error"只是抛出一个错误. 默认值 ``"fixup_error"`` 修复破损的URL,但如
    果不能这样做,则发出错误,而不是搜索.

.. [2] 当在全局配置文件 ``/etc/youtube-dl.conf`` 中给出.不要读取
    ``~/.config/youtube-dl/config`` 中的用户配置(Windows下为
    ``%APPDATA%/youtube-dl/config.txt``).

.. [3] 指定播放列表中视频的索引,用逗号隔开,如. ``"-- playlist-items 1,2,5,8"`` 如果你想下载播放列表中1、2、5、8索引的视频.你可以指定范围.
    ``" --playlist-items 1-3,7,10-13"``,它将下载索引为1,2,3,7,10,11,12和13的
    视频.

.. [4] (见 "OUTPUT TEMPLATE "的可用键列表),如果该键存在,则进行匹配；如
    果该键不存在,则检查！键>NUMBER(如 ``"comment_count > 12"``,也可以用>=、<、
    <=、！=、=)与数字进行比较；键='LITERAL'(如 "uploader = 'Mike Smith'",
    也可以用！=)与字符串字面进行匹配；&则要求多次匹配.除非你在运算符后面加
    一个问号(?),否则不知道的值将被排除.例如,为了只匹配那些被喜欢超过100次,
    不喜欢少于50次(或者不喜欢功能在给定的服务中不可用),但也有描述的视频,使
    用--匹配过滤器 ``"like_count > 100 & dislike_count <? 50 & description"``.

.. [5] 默认为 ``$XDG_CACHE_HOME/youtube-dl`` 或 ``~/.cache/youtube-dl``
    .目前,只有YouTube播放器文件(对于有混淆签名的视频)被缓存,但这可能会改变.
